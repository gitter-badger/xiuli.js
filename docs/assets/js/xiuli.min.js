!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("xiuli",[],e):"object"==typeof exports?exports.xiuli=e():t.xiuli=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,n){"use strict";function r(t){for(var e=getComputedStyle(t,null),n={},r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return o.forEach(function(t){var r=e.getPropertyValue("-webkit-"+t)||e.getPropertyValue("-moz-"+t)||e.getPropertyValue("-ms-"+t)||e.getPropertyValue("-o-"+t)||e.getPropertyValue(""+t)||"none";n[t]=r}),n}Object.defineProperty(e,"__esModule",{value:!0});var o="undefined"!=typeof Float32Array?Float32Array:Array;e.ARRAY_TYPE=o,e.getCSSStyles=r},function(t,e,n){"use strict";var r=n(2),o=function(t){return t&&t.__esModule?t:{default:t}}(r),i=new o.default;t.exports=i,console.log(i)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(3),u=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"xiuli";r(this,t);var o=document.querySelectorAll("[xiuli-target]");this.main=document.getElementById(n),this.root=this.main.parentElement;var i=this.root.getBoundingClientRect(),u=i.x,l=i.y;this.root.x=u,this.root.y=l,this.callback=null,this.clicked=null,this.main.addEventListener("transitionend",function(){e.callback&&e.clicked&&(e.callback(e.clicked),e.clicked=null)},!1),this.mainTrans=a.Mat4.fromElement(this.main),this.elements={},Array.prototype.forEach.call(o,this.init.bind(this))}return i(t,[{key:"init",value:function(t,e){var n=t.getAttribute("xiuli-target"),r=document.getElementById(n),i=(0,a.getCSSStyles)(r,"transform","transform-origin"),u=i.transform,l=i["transform-origin"],s=/[-+]?[0-9]*\.?[0-9]+/g,c=l.match(s),f=o(c,3),d=f[0],m=void 0===d?0:d,y=f[1],p=void 0===y?0:y,v=f[2],h=void 0===v?0:v,g=a.Mat4.fromCSSTransform(u),A=a.Vec3.fromValues(m,p,h),b=a.Mat4.fromTranslation(A);a.Mat4.multiply(b,g,g),a.Vec3.negate(A,A),A[0]-=(window.innerWidth-r.offsetWidth)/2-this.root.x,A[1]-=(window.innerHeight-r.offsetHeight)/2-this.root.y,a.Mat4.fromTranslation(A,b),a.Mat4.multiply(g,b,g),a.Mat4.invert(g,g),a.Mat4.multiply(this.mainTrans,g,g),this.elements[n]=a.Mat4.toCssTransform(g),0===e&&(this.main.style.transform=this.elements[n]),t.addEventListener("click",this.onMenuClick.bind(this))}},{key:"onMenuClick",value:function(t){var e=t.target,n=e.getAttribute("xiuli-target");this.main.style.transform=this.elements[n],this.clicked=e}},{key:"onTransitionend",value:function(t){this.callback=t}}]),t}();e.default=u},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.Mat4=e.Vec3=e.getCSSStyles=e.ARRAY_TYPE=void 0;var o=n(0),i=n(4),a=r(i),u=n(5),l=r(u);e.ARRAY_TYPE=o.ARRAY_TYPE,e.getCSSStyles=o.getCSSStyles,e.Vec3=a,e.Mat4=l},function(t,e,n){"use strict";function r(t,e,n){var r=new a.ARRAY_TYPE(3);return r[0]=t,r[1]=e,r[2]=n,r}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new a.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new a.ARRAY_TYPE(3);return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}Object.defineProperty(e,"__esModule",{value:!0}),e.fromValues=r,e.copy=o,e.negate=i;var a=n(0)},function(t,e,n){"use strict";function r(){var t=new f.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new f.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new f.ARRAY_TYPE(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new f.ARRAY_TYPE(16),r=t[0],o=t[1],i=t[2],a=t[3],u=t[4],l=t[5],s=t[6],c=t[7],d=t[8],m=t[9],y=t[10],p=t[11],v=t[12],h=t[13],g=t[14],A=t[15],b=e[0],S=e[1],_=e[2],P=e[3];return n[0]=b*r+S*u+_*d+P*v,n[1]=b*o+S*l+_*m+P*h,n[2]=b*i+S*s+_*y+P*g,n[3]=b*a+S*c+_*p+P*A,b=e[4],S=e[5],_=e[6],P=e[7],n[4]=b*r+S*u+_*d+P*v,n[5]=b*o+S*l+_*m+P*h,n[6]=b*i+S*s+_*y+P*g,n[7]=b*a+S*c+_*p+P*A,b=e[8],S=e[9],_=e[10],P=e[11],n[8]=b*r+S*u+_*d+P*v,n[9]=b*o+S*l+_*m+P*h,n[10]=b*i+S*s+_*y+P*g,n[11]=b*a+S*c+_*p+P*A,b=e[12],S=e[13],_=e[14],P=e[15],n[12]=b*r+S*u+_*d+P*v,n[13]=b*o+S*l+_*m+P*h,n[14]=b*i+S*s+_*y+P*g,n[15]=b*a+S*c+_*p+P*A,n}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new f.ARRAY_TYPE(16),n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],l=t[6],s=t[7],c=t[8],d=t[9],m=t[10],y=t[11],p=t[12],v=t[13],h=t[14],g=t[15],A=n*u-r*a,b=n*l-o*a,S=n*s-i*a,_=r*l-o*u,P=r*s-i*u,R=o*s-i*l,T=c*v-d*p,x=c*h-m*p,Y=c*g-y*p,E=d*h-m*v,w=d*g-y*v,M=m*g-y*h,k=A*M-b*w+S*E+_*Y-P*x+R*T;return k?(k=1/k,e[0]=(u*M-l*w+s*E)*k,e[1]=(o*w-r*M-i*E)*k,e[2]=(v*R-h*P+g*_)*k,e[3]=(m*P-d*R-y*_)*k,e[4]=(l*Y-a*M-s*x)*k,e[5]=(n*M-o*Y+i*x)*k,e[6]=(h*S-p*R-g*b)*k,e[7]=(c*R-m*S+y*b)*k,e[8]=(a*w-u*Y+s*T)*k,e[9]=(r*Y-n*w-i*T)*k,e[10]=(p*P-v*S+g*A)*k,e[11]=(d*S-c*P-y*A)*k,e[12]=(u*x-a*E-l*T)*k,e[13]=(n*E-r*x+o*T)*k,e[14]=(v*b-p*_-h*A)*k,e[15]=(c*_-d*b+m*A)*k,e):null}function l(t){var e=/\(|\)|, |\s/g,n=t.split(e),r=this.create();return"matrix"===n[0]?(r[0]=parseFloat(n[1]),r[1]=parseFloat(n[2]),r[4]=parseFloat(n[3]),r[5]=parseFloat(n[4]),r[12]=parseFloat(n[5]),r[13]=parseFloat(n[6])):"matrix3d"===n[0]&&this.copy(n.slice(1,17).map(function(t){return parseFloat(t)}),r),r}function s(t){var e=(0,f.getCSSStyles)(t,"transform"),n=e.transform;return this.fromCSSTransform(n)}function c(t){return"matrix3d("+t.join(",")+")"}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.copy=o,e.fromTranslation=i,e.multiply=a,e.invert=u,e.fromCSSTransform=l,e.fromElement=s,e.toCssTransform=c;var f=n(0)}])});