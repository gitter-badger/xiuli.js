{"version":3,"file":"xiuli.js","sources":["../src/matrix/util.js","../src/matrix/vec3.js","../src/matrix/mat4.js","../src/xiuli.js","../src/initializers.js","../src/main.js"],"sourcesContent":["/* global getComputedStyle */\n\nconst ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\n\n/**\n * Get CSS transform.\n *\n * @param {HTMLElement} el HTML element\n * @returns {string} transform\n */\nfunction getCSSStyles(el, ...properties) {\n  const style = getComputedStyle(el, null);\n  const result = {};\n  properties.forEach((value) => {\n    const property =\n      style.getPropertyValue(`-webkit-${value}`) ||\n      style.getPropertyValue(`-moz-${value}`) ||\n      style.getPropertyValue(`-ms-${value}`) ||\n      style.getPropertyValue(`-o-${value}`) ||\n      style.getPropertyValue(`${value}`) ||\n      'none';\n    result[value] = property;\n  });\n  return result;\n}\n\nexport { ARRAY_TYPE, getCSSStyles };\n","/* eslint no-param-reassign: [\"error\", { \"ignorePropertyModificationsFor\": [\"out\"]}] */\n/* eslint prefer-destructuring: [\"error\", {AssignmentExpression: {array: false}}] */\nimport { ARRAY_TYPE } from './util';\n\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\nexport function fromValues(x, y, z) {\n  const out = new ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n\n/**\n* Copy the values from one vec3 to another\n*\n* @param {vec3} a the source vector\n* @param {vec3} [out = new ARRAY_TYPE(3)] the receiving vector\n* @returns {vec3} out\n*/\nexport function copy(a, out = new ARRAY_TYPE(3)) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} a vector to negate\n * @param {vec3} [out = new ARRAY_TYPE(3)] the receiving vector\n * @returns {vec3} out\n */\nexport function negate(a, out = new ARRAY_TYPE(3)) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n","/* eslint no-param-reassign: [\"error\", {\"ignorePropertyModificationsFor\": [\"out\"]}] */\n/* eslint one-var-declaration-per-line: [\"off\"] */\n/* eslint one-var: [\"off\"] */\n/* eslint prefer-const: [\"off\"] */\n/* eslint no-mixed-operators: [\"off\"] */\n/* eslint prefer-destructuring: [\"error\", {AssignmentExpression: {array: false}}] */\n/* eslint-env es6 */\n/* eslint no-useless-escape: \"error\" */\n\nimport { ARRAY_TYPE, getCSSStyles } from './util';\n\n/**\n * Creates a new 4 x 4 identity Matrix.\n * @return {Mat4} a new 4 x 4 identity Matrix.\n */\nexport function create() {\n  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\n\n/**\n* Copy the values from one mat4 to another\n*\n* @param {mat4} a the source matrix\n* @param {mat4} [out = new ARRAY_TYPE(16)] the receiving matrix\n* @returns {mat4} out\n*/\nexport function copy(a, out = new ARRAY_TYPE(16)) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n\n/**\n * Creates a matrix from a vector translation\n *\n * @param {vec3} v Translation vector\n * @param {mat4} [out = new ARRAY_TYPE(16)] out mat4 receiving operation result\n * @returns {mat4} out\n */\nexport function fromTranslation(v, out = create()) {\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  return out;\n}\n\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @param {mat4} [out = new ARRAY_TYPE(16)] the receiving matrix\n * @returns {mat4} out\n */\nexport function multiply(a, b, out = new ARRAY_TYPE(16)) {\n  const a00 = a[0],\n    a01 = a[1],\n    a02 = a[2],\n    a03 = a[3],\n    a10 = a[4],\n    a11 = a[5],\n    a12 = a[6],\n    a13 = a[7],\n    a20 = a[8],\n    a21 = a[9],\n    a22 = a[10],\n    a23 = a[11],\n    a30 = a[12],\n    a31 = a[13],\n    a32 = a[14],\n    a33 = a[15];\n\n  // Cache only the current line of the second matrix\n  let b0 = b[0],\n    b1 = b[1],\n    b2 = b[2],\n    b3 = b[3];\n\n  out[0] = (b0 * a00) + (b1 * a10) + (b2 * a20) + (b3 * a30);\n  out[1] = (b0 * a01) + (b1 * a11) + (b2 * a21) + (b3 * a31);\n  out[2] = (b0 * a02) + (b1 * a12) + (b2 * a22) + (b3 * a32);\n  out[3] = (b0 * a03) + (b1 * a13) + (b2 * a23) + (b3 * a33);\n\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = (b0 * a00) + (b1 * a10) + (b2 * a20) + (b3 * a30);\n  out[5] = (b0 * a01) + (b1 * a11) + (b2 * a21) + (b3 * a31);\n  out[6] = (b0 * a02) + (b1 * a12) + (b2 * a22) + (b3 * a32);\n  out[7] = (b0 * a03) + (b1 * a13) + (b2 * a23) + (b3 * a33);\n\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = (b0 * a00) + (b1 * a10) + (b2 * a20) + (b3 * a30);\n  out[9] = (b0 * a01) + (b1 * a11) + (b2 * a21) + (b3 * a31);\n  out[10] = (b0 * a02) + (b1 * a12) + (b2 * a22) + (b3 * a32);\n  out[11] = (b0 * a03) + (b1 * a13) + (b2 * a23) + (b3 * a33);\n\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = (b0 * a00) + (b1 * a10) + (b2 * a20) + (b3 * a30);\n  out[13] = (b0 * a01) + (b1 * a11) + (b2 * a21) + (b3 * a31);\n  out[14] = (b0 * a02) + (b1 * a12) + (b2 * a22) + (b3 * a32);\n  out[15] = (b0 * a03) + (b1 * a13) + (b2 * a23) + (b3 * a33);\n  return out;\n}\n\n/**\n * Inverts a mat4\n *\n * @param {mat4} a the source matrix\n * @param {mat4} [out = new ARRAY_TYPE(16)] the receiving matrix\n * @returns {mat4} out\n */\nexport function invert(a, out = new ARRAY_TYPE(16)) {\n  const a00 = a[0],\n    a01 = a[1],\n    a02 = a[2],\n    a03 = a[3],\n    a10 = a[4],\n    a11 = a[5],\n    a12 = a[6],\n    a13 = a[7],\n    a20 = a[8],\n    a21 = a[9],\n    a22 = a[10],\n    a23 = a[11],\n    a30 = a[12],\n    a31 = a[13],\n    a32 = a[14],\n    a33 = a[15],\n\n    b00 = (a00 * a11) - (a01 * a10),\n    b01 = (a00 * a12) - (a02 * a10),\n    b02 = (a00 * a13) - (a03 * a10),\n    b03 = (a01 * a12) - (a02 * a11),\n    b04 = (a01 * a13) - (a03 * a11),\n    b05 = (a02 * a13) - (a03 * a12),\n    b06 = (a20 * a31) - (a21 * a30),\n    b07 = (a20 * a32) - (a22 * a30),\n    b08 = (a20 * a33) - (a23 * a30),\n    b09 = (a21 * a32) - (a22 * a31),\n    b10 = (a21 * a33) - (a23 * a31),\n    b11 = (a22 * a33) - (a23 * a32);\n\n  // Calculate the determinant\n  let det =\n    (b00 * b11) - (b01 * b10) + (b02 * b09) + (b03 * b08) - (b04 * b07) + (b05 * b06);\n\n  if (!det) {\n    return null;\n  }\n  det = 1.0 / det;\n\n  out[0] = ((a11 * b11) - (a12 * b10) + (a13 * b09)) * det;\n  out[1] = ((a02 * b10) - (a01 * b11) - (a03 * b09)) * det;\n  out[2] = ((a31 * b05) - (a32 * b04) + (a33 * b03)) * det;\n  out[3] = ((a22 * b04) - (a21 * b05) - (a23 * b03)) * det;\n  out[4] = ((a12 * b08) - (a10 * b11) - (a13 * b07)) * det;\n  out[5] = ((a00 * b11) - (a02 * b08) + (a03 * b07)) * det;\n  out[6] = ((a32 * b02) - (a30 * b05) - (a33 * b01)) * det;\n  out[7] = ((a20 * b05) - (a22 * b02) + (a23 * b01)) * det;\n  out[8] = ((a10 * b10) - (a11 * b08) + (a13 * b06)) * det;\n  out[9] = ((a01 * b08) - (a00 * b10) - (a03 * b06)) * det;\n  out[10] = ((a30 * b04) - (a31 * b02) + (a33 * b00)) * det;\n  out[11] = ((a21 * b02) - (a20 * b04) - (a23 * b00)) * det;\n  out[12] = ((a11 * b07) - (a10 * b09) - (a12 * b06)) * det;\n  out[13] = ((a00 * b09) - (a01 * b07) + (a02 * b06)) * det;\n  out[14] = ((a31 * b01) - (a30 * b03) - (a32 * b00)) * det;\n  out[15] = ((a20 * b03) - (a21 * b01) + (a22 * b00)) * det;\n\n  return out;\n}\n\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {vec3} axis the axis to rotate around\n * @returns {mat4} out\n */\nexport function rotate(a, rad, axis, out = new ARRAY_TYPE(16)) {\n  let x = axis[0], y = axis[1], z = axis[2];\n  let len = Math.sqrt(x * x + y * y + z * z);\n  let s, c, t;\n  let a00, a01, a02, a03;\n  let a10, a11, a12, a13;\n  let a20, a21, a22, a23;\n  let b00, b01, b02;\n  let b10, b11, b12;\n  let b20, b21, b22;\n\n  if (Math.abs(len) < 0.000001) { return null; }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n\n  a00 = a[0]; a01 = a[1]; a02 = a[2]; a03 = a[3];\n  a10 = a[4]; a11 = a[5]; a12 = a[6]; a13 = a[7];\n  a20 = a[8]; a21 = a[9]; a22 = a[10]; a23 = a[11];\n\n  // Construct the elements of the rotation matrix\n  b00 = x * x * t + c; b01 = y * x * t + z * s; b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s; b11 = y * y * t + c; b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s; b21 = y * z * t - x * s; b22 = z * z * t + c;\n\n  // Perform rotation-specific matrix multiplication\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) { // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n  return out;\n}\n\n/**\n * Creates a new 4 x 4 Matrix from CSS transform.\n *\n * @param {string} transform CSS transform\n * @returns {Mat4} out\n */\nexport function fromCSSTransform(transform) {\n  const re = /\\(|\\)|, |\\s/g,\n    values = transform.split(re),\n    matrix = create();\n\n  if (values[0] === 'matrix') {\n    matrix[0] = parseFloat(values[1]);\n    matrix[1] = parseFloat(values[2]);\n    matrix[4] = parseFloat(values[3]);\n    matrix[5] = parseFloat(values[4]);\n    matrix[12] = parseFloat(values[5]);\n    matrix[13] = parseFloat(values[6]);\n  } else if (values[0] === 'matrix3d') {\n    copy(values.slice(1, 17).map(v => parseFloat(v)), matrix);\n  }\n  return matrix;\n}\n\n/**\n * Creates a new 4 x 4 Matrix from CSS transform.\n *\n * @param {HTMLElement} el CSS transform\n * @returns {Mat4} out\n */\nexport function fromElement(el) {\n  const { transform } = getCSSStyles(el, 'transform'),\n    matrix = fromCSSTransform(transform);\n  return matrix;\n}\n\n/**\n * Convert Mat4 to CSS transform.\n *\n * @param {Mat4} transform 4 x 4 Matrix\n * @returns {string} CSS transform\n */\nexport function toCssTransform(transform) {\n  return `matrix3d(${transform.join(',')})`;\n}\n","/* global document */\n/* eslint no-param-reassign: [\"error\", {\"ignorePropertyModificationsFor\": [\"out\"]}] */\n\nimport { Mat4, Vec3, getCSSStyles } from './matrix';\n\nexport default class Xiuli {\n  constructor(mainContainer = 'xiuli', TFun = undefined) {\n    this.main = document.getElementById(mainContainer);\n    this.main.style.position = 'absolute';\n    this.main.style.transformStyle = 'preserve-3d';\n    const { 'transition-duration': transitionDuration } =\n     getCSSStyles(this.main, 'transition', 'transition-duration');\n    if (transitionDuration === '0s') {\n      this.main.style.transitionDuration = '2s';\n      this.main.style.WebkitTransitionDuration = '2s';\n    }\n    this.root = this.main.parentElement;\n    this.callback = null;\n    this.data = null;\n    this.main.addEventListener(\n      'transitionend',\n      () => {\n        if (this.callback) {\n          this.callback(this.elementIds[this.current], this.data);\n          this.data = null;\n        }\n      },\n      false,\n    );\n    this.mainTrans = Mat4.fromElement(this.main);\n    this.init(TFun);\n  }\n\n  init(TFun = undefined) {\n    this.TFun = TFun;\n    this.elementIds = [];\n    this.current = -1;\n    this.elements = {};\n    this.xiulies = this.main.querySelectorAll('[data-xiuli]');\n    if (this.TFun instanceof Function) {\n      Array.prototype.forEach.call(this.xiulies, (el, i, els) => {\n        let secTr = Mat4.create();\n        secTr = this.TFun(secTr, i, els);\n        el.style.transform = Mat4.toCssTransform(secTr);\n      });\n    }\n    Array.prototype.forEach.call(this.xiulies, (el, i) => {\n      let move = false;\n      if (i === 0) {\n        move = true;\n      }\n      this.add(el, move);\n    });\n  }\n\n  add(el, move) {\n    const { transform, 'transform-origin': transformOrigin } = getCSSStyles(el, 'transform', 'transform-origin');\n    const re = /[-+]?[0-9]*\\.?[0-9]+/g;\n    const [x = 0.0, y = 0.0, z = 0.0] = transformOrigin.match(re);\n    const secTr = Mat4.fromCSSTransform(transform);\n    const TrVec = Vec3.fromValues(x, y, z);\n    const TrMat = Mat4.fromTranslation(TrVec);\n    Mat4.multiply(TrMat, secTr, secTr);\n    Vec3.negate(TrVec, TrVec);\n    const w = this.root.offsetWidth;\n    const h = this.root.offsetHeight;\n    TrVec[0] -= ((w - el.offsetWidth) / 2);\n    TrVec[1] -= ((h - el.offsetHeight) / 2);\n    Mat4.fromTranslation(TrVec, TrMat);\n    Mat4.multiply(secTr, TrMat, secTr);\n\n    Mat4.invert(secTr, secTr);\n    Mat4.multiply(this.mainTrans, secTr, secTr);\n\n    this.elements[el.id] = Mat4.toCssTransform(secTr);\n    this.elementIds.push(el.id);\n    if (move) {\n      this.goto(el.id, null);\n    }\n  }\n  onTransitionend(fn) {\n    this.callback = fn;\n  }\n  goto(tId, data) {\n    const i = this.elementIds.indexOf(tId);\n    if (i !== -1) {\n      this.main.style.transform = this.elements[tId];\n      this.data = data;\n      this.current = i;\n    }\n  }\n\n  pre(data) {\n    this.current -= 1;\n    if (this.current < 0) {\n      this.current = this.elementIds.length - 1;\n    }\n    const tId = this.elementIds[this.current];\n    this.goto(tId, data);\n  }\n\n  next(data) {\n    this.current += 1;\n    if (this.current >= this.elementIds.length) {\n      this.current = 0;\n    }\n    const tId = this.elementIds[this.current];\n    this.goto(tId, data);\n  }\n}\n","import { Mat4, Vec3 } from './matrix';\n\nexport function steps(secTr, i) {\n  const tr = secTr;\n  tr[12] = 600;\n  tr[13] = -400 * i;\n  tr[14] = -400 * i;\n  return tr;\n}\n\nexport function circular(secTr, i) {\n  const thita = (6.28319 * (i)) / 6;\n  const tr = secTr;\n  tr[12] = 600 * Math.sin(thita);\n  tr[13] = 200;\n  tr[14] = 800 * (Math.cos(thita) - 1);\n  return tr;\n}\n\nexport function spiralSteps(secTr, i, els) {\n  const tr = secTr;\n  const thita = (6.28319 * (i)) / els.length;\n  Mat4.rotate(secTr, thita - 1.5708, Vec3.fromValues(0, 1, 0), secTr);\n  tr[12] = 500 * Math.sin(thita);\n  tr[13] = -400 * i;\n  tr[14] = 500 * (Math.cos(thita) - 1);\n  return tr;\n}\n\nexport function spiralRotated(secTr, i) {\n  const tr = secTr;\n  const thita = (6.28319 * (i)) / 6;\n  Mat4.rotate(secTr, thita, Vec3.fromValues(0, 1, 0), secTr);\n  tr[12] = 600 * Math.sin(thita);\n  tr[13] = 200 * i;\n  tr[14] = 600 * (Math.cos(thita) - 1);\n  return secTr;\n}\n\nexport function poly(secTr, i) {\n  const tr = secTr;\n  const thita = (6.28319 * (i)) / 6;\n  Mat4.rotate(secTr, thita, Vec3.fromValues(0, 1, 0), secTr);\n  tr[12] = 600 * Math.sin(thita);\n  tr[13] = 200;\n  tr[14] = 600 * (Math.cos(thita) - 1);\n  return secTr;\n}\n","import Xiuli from './xiuli';\nimport * as initializers from './initializers';\n\nXiuli.initializers = initializers;\n\nexport default Xiuli;\n"],"names":["ARRAY_TYPE","Float32Array","Array","getCSSStyles","el","style","getComputedStyle","result","properties","forEach","value","property","getPropertyValue","fromValues","x","y","z","out","negate","a","create","copy","fromTranslation","v","multiply","b","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b0","b1","b2","b3","invert","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","rotate","rad","axis","len","Math","sqrt","s","c","t","b12","b20","b21","b22","abs","sin","cos","fromCSSTransform","transform","re","values","split","matrix","parseFloat","slice","map","fromElement","toCssTransform","join","Xiuli","mainContainer","TFun","undefined","main","document","getElementById","position","transformStyle","transitionDuration","WebkitTransitionDuration","root","parentElement","callback","data","addEventListener","elementIds","current","mainTrans","Mat4","init","elements","xiulies","querySelectorAll","Function","prototype","call","i","els","secTr","move","add","transformOrigin","match","TrVec","Vec3","TrMat","w","offsetWidth","h","offsetHeight","id","push","goto","fn","tId","indexOf","length","steps","tr","circular","thita","spiralSteps","spiralRotated","poly","initializers"],"mappings":"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"}