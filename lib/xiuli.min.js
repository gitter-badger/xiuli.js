!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Xiuli",[],e):"object"==typeof exports?exports.Xiuli=e():t.Xiuli=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,n){"use strict";function r(t){for(var e=getComputedStyle(t,null),n={},r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.forEach(function(t){var r=e.getPropertyValue("-webkit-"+t)||e.getPropertyValue("-moz-"+t)||e.getPropertyValue("-ms-"+t)||e.getPropertyValue("-o-"+t)||e.getPropertyValue(""+t)||"none";n[t]=r}),n}Object.defineProperty(e,"__esModule",{value:!0});var i="undefined"!=typeof Float32Array?Float32Array:Array;e.ARRAY_TYPE=i,e.getCSSStyles=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=i.default,t.exports=e.default},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(3),u=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"xiuli";r(this,t),this.elementIds=[];var i=document.querySelectorAll("[xiuli-target]");this.current=-1,this.main=document.getElementById(n),this.main.style.position="absolute",this.main.style.transformStyle="preserve-3d","0s"===(0,a.getCSSStyles)(this.main,"transition","transition-duration")["transition-duration"]&&(this.main.style.transitionDuration="2s",this.main.style.WebkitTransitionDuration="2s"),this.root=this.main.parentElement;var o=this.root.getBoundingClientRect(),u=o.left,s=o.top;this.root.x=u,this.root.y=s,this.callback=null,this.data=null,this.main.addEventListener("transitionend",function(){e.callback&&(e.callback(e.elementIds[e.current],e.data),e.data=null)},!1),this.mainTrans=a.Mat4.fromElement(this.main),this.elements={},Array.prototype.forEach.call(i,function(t){e.add(t,!1)})}return o(t,[{key:"add",value:function(t,e){var n=(0,a.getCSSStyles)(t,"transform","transform-origin"),r=n.transform,o=n["transform-origin"],u=/[-+]?[0-9]*\.?[0-9]+/g,s=o.match(u),l=i(s,3),c=l[0],f=void 0===c?0:c,d=l[1],m=void 0===d?0:d,h=l[2],y=void 0===h?0:h,p=a.Mat4.fromCSSTransform(r),v=a.Vec3.fromValues(f,m,y),g=a.Mat4.fromTranslation(v);a.Mat4.multiply(g,p,p),a.Vec3.negate(v,v);var b=document.documentElement.clientWidth||document.body.clientWidth,A=document.documentElement.clientHeight||document.body.clientHeight;v[0]-=(b-t.offsetWidth)/2-this.root.x,v[1]-=(A-t.offsetHeight)/2-this.root.y,a.Mat4.fromTranslation(v,g),a.Mat4.multiply(p,g,p),a.Mat4.invert(p,p),a.Mat4.multiply(this.mainTrans,p,p),this.elements[t.id]=a.Mat4.toCssTransform(p),this.elementIds.push(t.id),e&&(this.main.style.transform=this.elements[t.id],this.clicked=t)}},{key:"onTransitionend",value:function(t){this.callback=t}},{key:"goto",value:function(t,e){var n=this.elementIds.indexOf(t);-1!==n&&(this.main.style.transform=this.elements[t],this.data=e,this.current=n)}},{key:"pre",value:function(t){this.current-=1,this.current<0&&(this.current=this.elementIds.length-1);var e=this.elementIds[this.current];this.goto(e,t)}},{key:"next",value:function(t){this.current+=1,this.current>=this.elementIds.length&&(this.current=0);var e=this.elementIds[this.current];this.goto(e,t)}}]),t}();e.default=u,t.exports=e.default},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.Mat4=e.Vec3=e.getCSSStyles=e.ARRAY_TYPE=void 0;var i=n(0),o=n(4),a=r(o),u=n(5),s=r(u);e.ARRAY_TYPE=i.ARRAY_TYPE,e.getCSSStyles=i.getCSSStyles,e.Vec3=a,e.Mat4=s},function(t,e,n){"use strict";function r(t,e,n){var r=new a.ARRAY_TYPE(3);return r[0]=t,r[1]=e,r[2]=n,r}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new a.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new a.ARRAY_TYPE(3);return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}Object.defineProperty(e,"__esModule",{value:!0}),e.fromValues=r,e.copy=i,e.negate=o;var a=n(0)},function(t,e,n){"use strict";function r(){var t=new f.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new f.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new f.ARRAY_TYPE(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new f.ARRAY_TYPE(16),r=t[0],i=t[1],o=t[2],a=t[3],u=t[4],s=t[5],l=t[6],c=t[7],d=t[8],m=t[9],h=t[10],y=t[11],p=t[12],v=t[13],g=t[14],b=t[15],A=e[0],S=e[1],_=e[2],P=e[3];return n[0]=A*r+S*u+_*d+P*p,n[1]=A*i+S*s+_*m+P*v,n[2]=A*o+S*l+_*h+P*g,n[3]=A*a+S*c+_*y+P*b,A=e[4],S=e[5],_=e[6],P=e[7],n[4]=A*r+S*u+_*d+P*p,n[5]=A*i+S*s+_*m+P*v,n[6]=A*o+S*l+_*h+P*g,n[7]=A*a+S*c+_*y+P*b,A=e[8],S=e[9],_=e[10],P=e[11],n[8]=A*r+S*u+_*d+P*p,n[9]=A*i+S*s+_*m+P*v,n[10]=A*o+S*l+_*h+P*g,n[11]=A*a+S*c+_*y+P*b,A=e[12],S=e[13],_=e[14],P=e[15],n[12]=A*r+S*u+_*d+P*p,n[13]=A*i+S*s+_*m+P*v,n[14]=A*o+S*l+_*h+P*g,n[15]=A*a+S*c+_*y+P*b,n}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new f.ARRAY_TYPE(16),n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=t[6],l=t[7],c=t[8],d=t[9],m=t[10],h=t[11],y=t[12],p=t[13],v=t[14],g=t[15],b=n*u-r*a,A=n*s-i*a,S=n*l-o*a,_=r*s-i*u,P=r*l-o*u,T=i*l-o*s,R=c*p-d*y,Y=c*v-m*y,E=c*g-h*y,x=d*v-m*p,M=d*g-h*p,w=m*g-h*v,j=b*w-A*M+S*x+_*E-P*Y+T*R;return j?(j=1/j,e[0]=(u*w-s*M+l*x)*j,e[1]=(i*M-r*w-o*x)*j,e[2]=(p*T-v*P+g*_)*j,e[3]=(m*P-d*T-h*_)*j,e[4]=(s*E-a*w-l*Y)*j,e[5]=(n*w-i*E+o*Y)*j,e[6]=(v*S-y*T-g*A)*j,e[7]=(c*T-m*S+h*A)*j,e[8]=(a*M-u*E+l*R)*j,e[9]=(r*E-n*M-o*R)*j,e[10]=(y*P-p*S+g*b)*j,e[11]=(d*S-c*P-h*b)*j,e[12]=(u*Y-a*x-s*R)*j,e[13]=(n*x-r*Y+i*R)*j,e[14]=(p*A-y*_-v*b)*j,e[15]=(c*_-d*A+m*b)*j,e):null}function s(t){var e=/\(|\)|, |\s/g,n=t.split(e),r=this.create();return"matrix"===n[0]?(r[0]=parseFloat(n[1]),r[1]=parseFloat(n[2]),r[4]=parseFloat(n[3]),r[5]=parseFloat(n[4]),r[12]=parseFloat(n[5]),r[13]=parseFloat(n[6])):"matrix3d"===n[0]&&this.copy(n.slice(1,17).map(function(t){return parseFloat(t)}),r),r}function l(t){var e=(0,f.getCSSStyles)(t,"transform"),n=e.transform;return this.fromCSSTransform(n)}function c(t){return"matrix3d("+t.join(",")+")"}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.copy=i,e.fromTranslation=o,e.multiply=a,e.invert=u,e.fromCSSTransform=s,e.fromElement=l,e.toCssTransform=c;var f=n(0)}])});